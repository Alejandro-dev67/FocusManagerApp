<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dashboard | FocusManager</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
</head>
<body>
  <!-- TOP BAR -->
  <header class="top-bar">
    <div class="left-title">
      <h1 class="title">FocusManager</h1>
    </div>

    <!-- USER BUTTON -->
    <div class="user-area" id="userArea">
      <button id="userBtn" class="user-btn" aria-haspopup="false" title="Usuario">
        <span id="userNameDisplay">Usuario</span>
      </button>
    </div>
  </header>

  <!-- MAIN: Board + Reports -->
  <!-- Nota: body tiene overflow-y:auto para scroll general -->
  <main class="board-wrap">
    <!-- PANEL DASHBOARD (columnas) -->
    <section id="panelDashboard" class="panel show">
      <div class="board-scroll" id="boardScroll">
        <div class="column add-column" id="addColumn">
          <button id="addTaskCard" class="add-card">+ Añadir una tarea</button>
        </div>
        <div id="columnsContainer" class="columns-container"></div>
      </div>
    </section>

    <!-- PANEL REPORTES (siempre debajo, visible con scroll general) -->
    <section class="reports" id="reportsSection" aria-label="Reportes">
      <div class="reports-inner">
        <div class="reports-header">
          <h2 class="reports-title">Reportes</h2>
        </div>

        <div class="reports-controls">
          <div class="filters">
            <label>Filtrar mes:
              <select id="filterMonth"></select>
            </label>

            <label>Filtrar prioridad:
              <select id="filterPriorityReports">
                <option value="all">Todas</option>
                <option value="Alta">Alta</option>
                <option value="Media">Media</option>
                <option value="Baja">Baja</option>
              </select>
            </label>
          </div>

          <div class="metrics">
            <div class="metric">Productividad: <span id="metricProductivity">0%</span></div>
            <div class="metric">Pendientes: <span id="metricPending">0</span></div>
          </div>
        </div>

        <!-- Lista de reportes: caja con scrollbar vertical propia cuando se llena -->
        <div id="reportsList" class="reports-list" role="region" aria-live="polite"></div>
      </div>
    </section>
  </main>

  <!-- Modal crear / editar tarea -->
  <div id="taskModal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modal-box" id="modalBox">
      <h3 class="modal-title">Crear nueva tarea</h3>

      <label class="label">Título</label>
      <input id="titulo" class="input" type="text" maxlength="120">

      <label class="label">Descripción</label>
      <textarea id="descripcion" class="textarea" rows="4"></textarea>

      <label class="label">Fecha límite</label>
      <input id="fecha" class="input" type="date">

      <label class="label">Prioridad</label>
      <select id="prioridad" class="input">
        <option value="Alta">Alta</option>
        <option value="Media" selected>Media</option>
        <option value="Baja">Baja</option>
      </select>

      <div class="modal-actions">
        <button id="cancelBtn" class="btn cancel">Cancelar</button>
        <button id="saveTaskBtn" class="btn save">Guardar</button>
      </div>
    </div>
  </div>

  <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>
